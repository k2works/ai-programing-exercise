<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/default}">
<head>
    <title>場所詳細</title>
</head>
<body>
<div layout:fragment="content">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1>場所詳細</h1>
        <div>
            <a th:href="@{/locations/{code}/edit(code=${location.locationCode})}"
               class="btn btn-primary">編集</a>
            <a th:href="@{/locations}" class="btn btn-secondary">一覧に戻る</a>
        </div>
    </div>

    <div class="card mb-4">
        <div class="card-body">
            <!-- 基本情報 -->
            <h5 class="card-title mb-3">基本情報</h5>
            <dl class="row">
                <dt class="col-sm-3">場所コード</dt>
                <dd class="col-sm-9" th:text="${location.locationCode}"></dd>

                <dt class="col-sm-3">場所名</dt>
                <dd class="col-sm-9" th:text="${location.locationName}"></dd>

                <dt class="col-sm-3">場所区分</dt>
                <dd class="col-sm-9">
                    <span class="badge"
                          th:classappend="${location.locationType.name() == 'WAREHOUSE'} ? 'bg-primary' :
                                          (${location.locationType.name() == 'MANUFACTURING'} ? 'bg-success' :
                                          (${location.locationType.name() == 'INSPECTION'} ? 'bg-info' :
                                          (${location.locationType.name() == 'SHIPPING'} ? 'bg-warning' : 'bg-secondary')))"
                          th:text="${location.locationType.displayName}"></span>
                </dd>

                <dt class="col-sm-3">親場所</dt>
                <dd class="col-sm-9">
                    <span th:if="${parentLocation != null}">
                        <a th:href="@{/locations/{code}(code=${parentLocation.locationCode})}"
                           th:text="${parentLocation.locationCode + ' - ' + parentLocation.locationName}"></a>
                    </span>
                    <span th:unless="${parentLocation != null}">-</span>
                </dd>
            </dl>

            <hr>

            <!-- システム情報 -->
            <h5 class="card-title mb-3">システム情報</h5>
            <dl class="row">
                <dt class="col-sm-3">作成日時</dt>
                <dd class="col-sm-9" th:text="${location.createdAt}"></dd>

                <dt class="col-sm-3">更新日時</dt>
                <dd class="col-sm-9" th:text="${location.updatedAt}"></dd>
            </dl>
        </div>
    </div>

    <!-- 子場所一覧 -->
    <div class="card" th:if="${not #lists.isEmpty(childLocations)}">
        <div class="card-header">子場所一覧</div>
        <div class="card-body">
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th>場所コード</th>
                        <th>場所名</th>
                        <th>場所区分</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="child : ${childLocations}">
                        <td>
                            <a th:href="@{/locations/{code}(code=${child.locationCode})}"
                               th:text="${child.locationCode}"></a>
                        </td>
                        <td th:text="${child.locationName}"></td>
                        <td>
                            <span class="badge"
                                  th:classappend="${child.locationType.name() == 'WAREHOUSE'} ? 'bg-primary' :
                                                  (${child.locationType.name() == 'MANUFACTURING'} ? 'bg-success' :
                                                  (${child.locationType.name() == 'INSPECTION'} ? 'bg-info' :
                                                  (${child.locationType.name() == 'SHIPPING'} ? 'bg-warning' : 'bg-secondary')))"
                                  th:text="${child.locationType.displayName}"></span>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
</body>
</html>
