# 🎮 Mega Wing AI統合版 使用ガイド

## 🚀 実行方法

### PyTorchエラーが発生する場合（推奨）
```bash
cd app/chapter6
uv run python main_with_ai_simple.py
```

### PyTorchが正常動作する場合
```bash
cd app/chapter6
uv run python main_with_ai.py
```

### 従来版（AI機能なし）
```bash
cd app/chapter6
uv run python main.py
```

## 🎯 操作方法

### 基本操作
- **矢印キー** ↑↓←→: プレイヤー移動
- **スペースキー** ⎵: 射撃
- **ENTER**: ゲーム開始/リスタート
- **ESC**: ゲーム終了

### AI支援操作
- **Aキー**: AI支援のON/OFF切り替え

## 🧠 AI機能説明

### シンプル版AI機能（main_with_ai_simple.py）
- **プレイヤー支援**: 敵弾回避システム
- **スマート敵**: 距離ベース行動決定AI
- **PyTorch不要**: 基本的なアルゴリズムのみ使用

### フル版AI機能（main_with_ai.py）
- **高度なプレイヤー支援**: 自動照準 + 弾道予測回避
- **学習型スマート敵**: ニューラルネットワークAI
- **PyTorch必要**: 機械学習ライブラリ使用

## 📊 ゲーム画面の見方

### HUD（画面左上）
```
SCORE:1500          <- 現在のスコア
AI:ON               <- AI支援状態（ON/OFF/ERROR）
Enemies:5           <- 敵の総数
Smart:2             <- スマート敵の数
```

### HUD（画面右上、AI有効時のみ）
```
Aim:12              <- 自動照準使用回数
Dodge:8             <- 回避支援実行回数
```

### 敵の種類と色
- **通常敵**:
  - Type A: 赤色 (基本敵)
  - Type B: 紫色 (高速敵)
  - Type C: オレンジ色 (連射敵)

- **スマート敵**:
  - Type A: ピンク色 (AI基本敵)
  - Type B: ピーチ色 (AI高速敵)
  - Type C: 黄色 (AI連射敵)

## ⚡ AI支援システム詳細

### プレイヤー支援AI
1. **回避支援**: 
   - 敵弾が接近すると自動で回避方向を提示
   - プレイヤーの入力を妨げずに支援
   
2. **射撃支援**: 
   - 射程内の敵を検出して射撃タイミングを推奨

### スマート敵AI（シンプル版）
1. **行動パターン**:
   - **遠距離（80+）**: プレイヤーに接近（追跡モード）
   - **中距離（40-80）**: 通常の下降移動
   - **近距離（-40）**: プレイヤーから離脱（回避モード）

2. **射撃パターン**:
   - ランダムタイミングで射撃
   - プレイヤーの行動に関係なく基本的な攻撃

## 🎯 得点システム

- **通常敵撃破**: 100点
- **スマート敵撃破**: 150点（高得点）
- **プレイヤー被弾**: ゲームオーバー

## 🔧 トラブルシューティング

### PyTorch DLLエラーが発生する場合
```
ImportError: DLL load failed while importing _C
```
**解決策**: `main_with_ai_simple.py` を使用してください

### ゲームが起動しない場合
```bash
# 依存関係を確認
cd app/chapter6
uv run python -c "import pyxel; print('Pyxel OK')"

# 基本ゲームの動作確認
uv run python main.py
```

### AI機能が動作しない場合
- AI支援が**OFF**になっていないか確認（Aキーで切り替え）
- AI状態表示が**ERROR**の場合はシンプル版を使用

## 📈 パフォーマンス

### 推奨環境
- **CPU**: 現代的な任意のプロセッサ
- **RAM**: 512MB以上
- **Python**: 3.10以上

### フレームレート
- **シンプル版**: 60FPS安定動作
- **フル版**: 環境によりPyTorch処理で若干低下する可能性

## 🎮 ゲームプレイのコツ

### AI支援を活用した戦略
1. **AI支援ON**: 初心者や高得点狙い
   - 自動回避で生存率アップ
   - 射撃タイミングの最適化

2. **AI支援OFF**: 上級者や純粋なスキル向上
   - 完全手動操作でスキル向上
   - より挑戦的なゲームプレイ

### 敵の特徴を活用
- **スマート敵**: 行動パターンが読みやすいため、動きを予測して撃破
- **通常敵**: ランダム性があるため、基本的な回避技術で対処

---

**開発完了日**: 2025年1月7日  
**バージョン**: AI統合版 v1.0  
**対応環境**: Windows 10/11, Python 3.10+