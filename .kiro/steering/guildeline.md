---
inclusion: always
---

# 開発ガイドライン

## 開発アプローチ

### テスト駆動開発 (TDD)
**必須**: 全ての実装でRed-Green-Refactorサイクルを厳守する

1. **Red**: 失敗するテストを先に書く
2. **Green**: テストを通す最小限のコードを実装
3. **Refactor**: 機能を維持しながらコード品質を向上

### アーキテクチャアプローチ選択

#### インサイドアウト（推奨）
- ドメインモデルから実装開始
- ドメイン駆動設計に適合
- 新機能やコアロジック実装時に使用

**実装順序**: ドメイン層 → アプリケーション層 → インフラ層 → プレゼンテーション層

#### アウトサイドイン
- UIから実装開始
- プロトタイプ駆動開発に適合
- UI/UX検証が必要な場合に使用

**実装順序**: プレゼンテーション層 → アプリケーション層 → ドメイン層 → インフラ層

## コード品質基準

### 必須チェック項目
- [ ] TypeScript厳密モード適用（`any`型禁止）
- [ ] テストカバレッジ80%以上
- [ ] サイクロマティック複雑度は7
- [ ] ESLint/Prettierエラーなし
- [ ] 関数型プログラミング原則（不変性、純粋関数）
- [ ] ヘキサゴナルアーキテクチャ準拠

### ファイル構成規則
```
src/
├── domain/           # ビジネスロジック（外部依存なし）
├── application/      # ユースケース・状態管理
├── infrastructure/   # 外部システム連携
└── presentation/     # UI コンポーネント
```

### 命名規則
- **コンポーネント**: PascalCase (`GameBoard.tsx`)
- **関数・変数**: camelCase (`calculateScore`)
- **定数**: UPPER_SNAKE_CASE (`MAX_CHAIN_COUNT`)
- **型定義**: PascalCase (`GameState`)

## 実装ガイドライン

### React コンポーネント
- 関数型コンポーネントのみ使用
- カスタムHooksで状態ロジック分離
- propsの型定義必須
- useEffectの依存配列適切に管理

### 状態管理（Zustand）
- 単一責任の原則でストア分割
- 不変更新パターン使用
- アクションは純粋関数として実装

### テスト戦略
- **単体テスト**: Vitest（ドメイン・アプリケーション層）
- **統合テスト**: React Testing Library（コンポーネント）
- **E2Eテスト**: Playwright（ユーザーシナリオ）
- **テスト名**: 日本語で記述可能（可読性向上）

### パフォーマンス要件
- 60FPS維持（ゲームループ）
- メモリリーク防止
- 不要な再レンダリング回避
- Canvas API最適化（ゲーム描画）