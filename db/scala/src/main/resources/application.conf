# ScalikeJDBC 設定
db {
  default {
    driver = "org.postgresql.Driver"
    url = "jdbc:postgresql://localhost:5432/sales_management"
    user = "postgres"
    password = "postgres"

    # HikariCP 設定
    poolInitialSize = 5
    poolMaxSize = 10
    poolConnectionTimeoutMillis = 3000
    poolValidationQuery = "SELECT 1"
  }

  test {
    driver = "org.postgresql.Driver"
    url = "jdbc:postgresql://localhost:5433/sales_management_test"
    user = "postgres"
    password = "postgres"

    poolInitialSize = 1
    poolMaxSize = 5
    poolConnectionTimeoutMillis = 3000
    poolValidationQuery = "SELECT 1"
  }
}

# Flyway 設定
flyway {
  default {
    locations = ["classpath:db/migration"]
    cleanDisabled = true
  }

  test {
    locations = ["classpath:db/migration"]
    cleanDisabled = false
  }
}

# Akka HTTP 設定
akka {
  http {
    server {
      idle-timeout = 60s
      request-timeout = 20s
      bind-timeout = 3s
      preview.enable-http2 = off
    }
  }

  loglevel = "INFO"

  actor {
    default-dispatcher {
      type = "Dispatcher"
      executor = "fork-join-executor"
      fork-join-executor {
        parallelism-min = 2
        parallelism-factor = 2.0
        parallelism-max = 10
      }
      throughput = 5
    }
  }
}
