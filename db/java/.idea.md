# IntelliJ IDEA 設定ガイド

## プロジェクトのインポート方法

### ステップ1: プロジェクトを開く

1. IntelliJ IDEA を起動
2. **File** → **Open**
3. **`db/java`** フォルダを選択（重要: `db/java/app` ではありません）
4. **OK** をクリック

### ステップ2: Gradle設定の確認

1. **File** → **Settings** (Windows/Linux) または **IntelliJ IDEA** → **Preferences** (Mac)
2. **Build, Execution, Deployment** → **Build Tools** → **Gradle** を選択
3. 以下の設定を確認:
   - **Build and run using**: Gradle (default)
   - **Run tests using**: Gradle (default)
   - **Gradle JVM**: Project SDK (Java 21)
   - **Use Gradle from**: 'gradle-wrapper.properties' file

### ステップ3: プロジェクト構造の確認

1. **File** → **Project Structure** (Ctrl+Alt+Shift+S)
2. **Project** セクション:
   - **SDK**: Java 21
   - **Language level**: 21
3. **Modules** セクション:
   - `sales-management-db` (ルートプロジェクト)
   - `sales-management-db.app` (サブプロジェクト)

## Gradleタスクの実行方法

### Gradle Tool Window から実行

1. **View** → **Tool Windows** → **Gradle** を開く
2. **`sales-management-db`** （ルートプロジェクト）を展開
3. **Tasks** を展開
4. 実行したいタスクグループを展開（build, verification など）
5. タスクをダブルクリックで実行

**注意**: `:app` プロジェクトではなく、必ず **ルートプロジェクト** (`sales-management-db`) からタスクを実行してください。

### よく使うタスク

- **build** → **build**: プロジェクトをビルド
- **build** → **clean**: ビルド成果物を削除
- **verification** → **test**: テストを実行
- **verification** → **checkAll**: 全チェックを実行
- **application** → **bootRun**: Spring Boot アプリケーションを起動

### ターミナルから実行

1. **View** → **Tool Windows** → **Terminal**
2. ターミナルで以下を確認:
   ```bash
   # 作業ディレクトリの確認（db/javaであること）
   pwd

   # タスクの実行
   ./gradlew build
   ./gradlew test
   ```

## トラブルシューティング

### エラー: "Task 'xxx' not found in project ':app'"

**原因**: サブプロジェクト (`:app`) から実行しようとしている

**解決策**:
1. Gradle Tool Window で **ルートプロジェクト** (`sales-management-db`) を選択
2. または、ターミナルで `cd db/java` を実行してからコマンドを実行

### Gradleの再同期

プロジェクト構造が正しく認識されない場合:

1. **File** → **Invalidate Caches / Restart**
2. または、Gradle Tool Window で **Reload All Gradle Projects** アイコンをクリック

### JDKの設定

Java 21が認識されない場合:

1. **File** → **Project Structure**
2. **SDKs** セクション
3. **+** → **Download JDK**
4. **Version**: 21, **Vendor**: Oracle OpenJDK または Amazon Corretto
5. **Download** をクリック

## 推奨プラグイン

以下のプラグインをインストールすることをお勧めします:

- **Lombok** - Lombokアノテーションのサポート
- **MyBatis** - MyBatisのXMLサポート
- **SonarLint** - コード品質チェック
- **GitToolBox** - Git統合の強化

## キーボードショートカット

- **Ctrl+Shift+F10** (Win/Linux) / **Ctrl+Shift+R** (Mac): 現在のファイルを実行
- **Shift+F10** (Win/Linux) / **Ctrl+R** (Mac): 前回の実行を再実行
- **Ctrl+Shift+F9** (Win/Linux) / **Ctrl+Shift+D** (Mac): デバッグ実行
- **Ctrl+F9**: プロジェクトをビルド

## プロジェクト構造

```
db/java/                           ← プロジェクトルート（ここを開く）
├── .idea/                         ← IntelliJ IDEA 設定（自動生成）
├── app/                           ← サブプロジェクト
│   ├── src/
│   │   ├── main/
│   │   └── test/
│   └── build.gradle
├── config/
├── docker/
├── gradle/
│   └── wrapper/
├── settings.gradle                ← プロジェクト設定
├── build.gradle                   ← （なし - サブプロジェクトのみ）
└── gradlew                        ← Gradle Wrapper
```

## 設定完了の確認

1. Gradle Tool Window で `sales-management-db` プロジェクトが表示されている
2. ターミナルのデフォルトディレクトリが `db/java` になっている
3. `./gradlew tasks` が正常に実行できる

これで設定完了です！
