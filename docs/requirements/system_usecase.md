# システムユースケース仕様書 - 会議室予約システム

## UC001:🖥️会議室検索🌊

**使用時のコンテキスト**: 会員が利用可能な会議室を検索する場合

**スコープ**: 会議室予約システム

**レベル**: ユーザー目的

**主アクター**: 会員

**利害関係者と利益**:
- 会員: 希望条件に合う会議室を迅速に見つけたい
- システム: 効率的な検索機能を提供したい

**事前条件**:
- 会員としてログインしている
- 会議室情報がシステムに登録されている

**最低保証**: 検索システムが応答し、適切なエラーハンドリングが行われる

**成功保証時**: 希望条件に合致する利用可能な会議室一覧が表示される

**トリガー**: 会員が検索画面で検索条件を指定し検索ボタンを押下

**主成功シナリオ**:
1. システムが検索画面を表示する
2. 会員が検索条件（日付、時間、定員、設備）を入力する
3. 会員が検索ボタンを押下する
4. システムが入力条件を検証する
5. システムが会議室情報と予約情報を照合する
6. システムが利用可能な会議室一覧を表示する
7. システムが各会議室の基本情報（名前、定員、料金、設備）を表示する

**拡張**:
- 4a. 必須入力項目が未入力: エラーメッセージを表示し、ステップ2に戻る
- 4b. 日付が過去の場合: エラーメッセージを表示し、ステップ2に戻る
- 6a. 該当する会議室がない場合: 「該当なし」メッセージを表示し、条件緩和を提案
- 6b. システムエラーが発生: エラーメッセージを表示し、管理者に通知

**技術およびデータのバリエーションリスト**:
- 2a. 日付指定（カレンダー選択）
- 2b. 時間指定（プルダウン選択）
- 2c. 設備指定（チェックボックス選択）
- 6a. リスト表示
- 6b. カード表示

**関連情報**:
- 検索結果は会議室情報・設備情報・予約情報の結合
- レスポンス時間は1秒以内を目標
- 時間制約チェック制御と連携

---

## UC002:🖥️会議室予約🌊

**使用時のコンテキスト**: 会員が希望する会議室の予約を確定する場合

**スコープ**: 会議室予約システム

**レベル**: ユーザー目的

**主アクター**: 会員

**利害関係者と利益**:
- 会員: 希望する会議室を確実に予約したい
- システム: 正確な予約管理を行いたい

**事前条件**:
- 会員としてログインしている
- 予約対象の会議室が選択されている
- 会員の同時予約件数が上限（3件）未満である

**最低保証**: 予約データの整合性が保たれ、重複予約が発生しない

**成功保証時**: 予約が正常に確定し、予約情報が会員に提供される

**トリガー**: 会員が予約画面で予約ボタンを押下

**主成功シナリオ**:
1. システムが予約画面を表示する
2. 会員が予約詳細（利用目的、参加人数、備考）を入力する
3. 会員が予約確定ボタンを押下する
4. システムが入力内容を検証する
5. システムが重複チェックを実行する
6. システムが時間制約チェック（2時間前ルール）を実行する
7. システムが会員の同時予約件数チェックを実行する
8. システムが予約情報を作成し、予約番号を発行する
9. システムが予約確定画面を表示する
10. システムがメール配信システムに確認メール送信を依頼する

**拡張**:
- 4a. 必須項目が未入力: エラーメッセージを表示し、ステップ2に戻る
- 5a. 重複予約が検出: エラーメッセージを表示し、代替時間を提案
- 6a. 時間制約違反: エラーメッセージを表示し、最短予約可能時間を案内
- 7a. 同時予約件数上限超過: エラーメッセージを表示し、既存予約一覧を表示
- 8a. システムエラーで予約失敗: エラーメッセージを表示し、管理者に通知
- 10a. メール送信失敗: 予約は確定したまま、管理者に通知

**技術およびデータのバリエーションリスト**:
- 8a. 即時確定予約
- 8b. 承認待ち予約（特定会議室の場合）
- 10a. 自動メール送信
- 10b. 手動メール送信フラグ設定

**関連情報**:
- 予約情報エンティティ・予約詳細エンティティと連携
- 重複チェック制御・時間制約チェック制御を使用
- メール配信システムとのインターフェース連携

---

## UC003:🖥️予約確認🌊

**使用時のコンテキスト**: 会員が自分の予約状況を確認したい場合

**スコープ**: 会議室予約システム

**レベル**: ユーザー目的

**主アクター**: 会員

**利害関係者と利益**:
- 会員: 予約状況を正確に把握したい
- システム: 最新の予約情報を提供したい

**事前条件**:
- 会員としてログインしている

**最低保証**: 会員の予約データが正確に表示される

**成功保証時**: 会員が自分の全予約状況を確認できる

**トリガー**: 会員が予約一覧画面にアクセス

**主成功シナリオ**:
1. システムが会員IDを取得する
2. システムが該当会員の予約一覧を検索する
3. システムが予約状態でフィルタリング（確定・キャンセル済み）する
4. システムが予約一覧を時系列順で表示する
5. 会員が確認したい予約を選択する
6. システムが選択した予約の詳細情報を表示する

**拡張**:
- 2a. 予約が存在しない場合: 「予約がありません」メッセージを表示
- 4a. 表示件数が多い場合: ページネーション機能を適用
- 6a. 予約詳細取得でエラー発生: エラーメッセージを表示し、ステップ4に戻る

**技術およびデータのバリエーションリスト**:
- 3a. 全予約表示
- 3b. 有効予約のみ表示
- 4a. リスト表示
- 4b. カレンダー表示
- 6a. ポップアップ表示
- 6b. 別画面表示

**関連情報**:
- 予約情報・利用履歴エンティティから情報取得
- リアルタイム情報更新が必要

---

## UC004:🖥️予約キャンセル🌊

**使用時のコンテキスト**: 会員が予約をキャンセルしたい場合

**スコープ**: 会議室予約システム

**レベル**: ユーザー目的

**主アクター**: 会員

**利害関係者と利益**:
- 会員: 不要な予約を簡単にキャンセルしたい
- システム: 正確なキャンセル処理を行いたい

**事前条件**:
- 会員としてログインしている
- キャンセル対象の予約が確定状態である
- キャンセル制約時間内である（利用開始2時間前まで）

**最低保証**: キャンセル処理が正確に実行され、データ整合性が保たれる

**成功保証時**: 予約が正常にキャンセルされ、利用履歴に記録される

**トリガー**: 会員が予約詳細画面でキャンセルボタンを押下

**主成功シナリオ**:
1. システムがキャンセル対象の予約情報を取得する
2. システムがキャンセル制約チェック（2時間前ルール）を実行する
3. システムがキャンセル確認画面を表示する
4. 会員がキャンセル理由を入力する（任意）
5. 会員がキャンセル確定ボタンを押下する
6. システムが予約状態を「キャンセル済み」に更新する
7. システムがキャンセル情報エンティティを作成する
8. システムが利用履歴に記録する
9. システムがキャンセル完了画面を表示する
10. システムがメール配信システムにキャンセル通知送信を依頼する

**拡張**:
- 2a. キャンセル制約違反: エラーメッセージを表示し、スタッフ経由での対応を案内
- 6a. システムエラーでキャンセル失敗: エラーメッセージを表示し、管理者に通知
- 10a. メール送信失敗: キャンセルは完了したまま、管理者に通知

**技術およびデータのバリエーションリスト**:
- 4a. 理由入力あり
- 4b. 理由入力なし
- 6a. 通常キャンセル
- 6b. システム自動キャンセル

**関連情報**:
- キャンセル制約チェック制御を使用
- キャンセル情報エンティティに理由・日時を記録
- メール配信システムとのインターフェース連携

---

## UC005:🖥️会員登録🌊

**使用時のコンテキスト**: スタッフが新規利用者の会員登録を行う場合

**スコープ**: 会議室予約システム

**レベル**: ユーザー目的

**主アクター**: スタッフ

**利害関係者と利益**:
- 新規利用者: システムを利用開始したい
- スタッフ: 効率的な登録処理を行いたい
- システム: 正確な会員情報を管理したい

**事前条件**:
- スタッフとしてログインしている
- 新規利用者の基本情報が用意されている

**最低保証**: 会員情報の正確性とセキュリティが確保される

**成功保証時**: 新規会員が正常に登録され、システム利用が可能になる

**トリガー**: スタッフが会員登録画面で登録処理を開始

**主成功シナリオ**:
1. システムが会員登録画面を表示する
2. スタッフが新規会員の基本情報を入力する（氏名、連絡先、所属等）
3. スタッフが登録ボタンを押下する
4. システムが入力内容を検証する
5. システムが重複会員チェックを実行する
6. システムが会員IDを自動発行する
7. システムがログイン情報（初期パスワード）を生成する
8. システムがユーザー情報・ログイン情報エンティティを作成する
9. システムが権限チェック制御に会員権限を設定する
10. システムが登録完了画面を表示する
11. システムがメール配信システムに登録通知送信を依頼する

**拡張**:
- 4a. 必須項目未入力: エラーメッセージを表示し、ステップ2に戻る
- 4b. 入力形式不正: エラーメッセージを表示し、ステップ2に戻る
- 5a. 重複会員検出: 既存会員情報を表示し、統合または別登録を選択
- 8a. システムエラーで登録失敗: エラーメッセージを表示し、管理者に通知
- 11a. メール送信失敗: 登録は完了したまま、手動連絡フラグを設定

**技術およびデータのバリエーションリスト**:
- 2a. 個人会員登録
- 2b. 法人会員登録
- 6a. 連番ID発行
- 6b. ランダムID発行
- 7a. 自動パスワード生成
- 7b. 仮パスワード設定

**関連情報**:
- ユーザー情報・ログイン情報エンティティと連携
- 権限チェック制御での権限管理
- 個人情報保護法への準拠が必要

---

## UC006:🖥️会員情報更新🌊

**使用時のコンテキスト**: 管理者が会員の情報変更を行う場合

**スコープ**: 会議室予約システム

**レベル**: ユーザー目的

**主アクター**: 管理者

**利害関係者と利益**:
- 会員: 正確な情報でサービスを利用したい
- 管理者: 会員情報を適切に管理したい
- システム: 最新の会員情報を維持したい

**事前条件**:
- 管理者としてログインしている
- 更新対象の会員が存在する
- 管理者権限を持っている

**最低保証**: 会員情報の整合性とセキュリティが保たれる

**成功保証時**: 会員情報が正常に更新され、履歴が記録される

**トリガー**: 管理者が会員管理画面で更新処理を開始

**主成功シナリオ**:
1. システムが会員検索画面を表示する
2. 管理者が更新対象の会員を検索・選択する
3. システムが現在の会員情報を表示する
4. 管理者が変更内容を入力する
5. 管理者が更新ボタンを押下する
6. システムが入力内容を検証する
7. システムが権限チェックを実行する
8. システムが会員情報を更新する
9. システムが利用履歴に変更履歴を記録する
10. システムが更新完了画面を表示する
11. システムが必要に応じて会員に変更通知を送信する

**拡張**:
- 2a. 該当会員が見つからない: 「該当なし」メッセージを表示
- 6a. 入力内容不正: エラーメッセージを表示し、ステップ4に戻る
- 7a. 権限不足: エラーメッセージを表示し、処理を中断
- 8a. システムエラーで更新失敗: ロールバック処理を実行し、エラーログを記録
- 11a. 重要変更の場合: 必ず通知を送信
- 11b. メール送信失敗: 更新は完了したまま、管理者に通知

**技術およびデータのバリエーションリスト**:
- 4a. 基本情報変更（氏名、連絡先等）
- 4b. ステータス変更（有効/無効）
- 4c. 権限変更
- 11a. 自動通知
- 11b. 手動通知フラグ

**関連情報**:
- ユーザー情報・利用履歴エンティティと連携
- 権限チェック制御での権限確認
- 変更履歴の保持期間管理

---

## UC007:🖥️会員削除🌊

**使用時のコンテキスト**: スタッフが会員の削除処理を行う場合

**スコープ**: 会議室予約システム

**レベル**: ユーザー目的

**主アクター**: スタッフ

**利害関係者と利益**:
- スタッフ: 退会処理を適切に行いたい
- システム: データ整合性を保ちたい

**事前条件**:
- スタッフとしてログインしている
- 削除対象の会員が存在する
- 該当会員に有効な予約が存在しない

**最低保証**: 削除処理が正確に実行され、関連データの整合性が保たれる

**成功保証時**: 会員が正常に削除され、利用履歴が保持される

**トリガー**: スタッフが会員管理画面で削除処理を開始

**主成功シナリオ**:
1. システムが会員検索画面を表示する
2. スタッフが削除対象の会員を検索・選択する
3. システムが会員情報と関連する予約情報を表示する
4. システムが削除可能性をチェックする
5. システムが削除確認画面を表示する
6. スタッフが削除理由を入力し、削除確定ボタンを押下する
7. システムが権限チェックを実行する
8. システムがユーザー情報のステータスを「削除済み」に更新する
9. システムがログイン情報を無効化する
10. システムが利用履歴に削除記録を追加する
11. システムが削除完了画面を表示する

**拡張**:
- 4a. 有効な予約が存在: エラーメッセージを表示し、予約処理を先に促す
- 4b. 削除制約違反: エラーメッセージを表示し、制約内容を説明
- 7a. 権限不足: エラーメッセージを表示し、処理を中断
- 8a. システムエラーで削除失敗: エラーメッセージを表示し、管理者に通知

**技術およびデータのバリエーションリスト**:
- 8a. 論理削除（ステータス更新）
- 8b. 物理削除（データ完全削除）
- 10a. 削除履歴記録
- 10b. アーカイブ処理

**関連情報**:
- ユーザー情報・ログイン情報・利用履歴エンティティと連携
- 権限チェック制御での権限確認
- 個人情報保護法に基づく削除要件への対応

---

## UC008:🖥️会議室登録🌊

**使用時のコンテキスト**: スタッフが新しい会議室をシステムに登録する場合

**スコープ**: 会議室予約システム

**レベル**: ユーザー目的

**主アクター**: スタッフ

**利害関係者と利益**:
- スタッフ: 新会議室を効率的に登録したい
- 施設運営者: 会議室リソースを拡充したい
- システム: 正確な会議室情報を管理したい

**事前条件**:
- スタッフとしてログインしている
- 新規会議室の情報が用意されている

**最低保証**: 会議室情報の正確性が確保される

**成功保証時**: 新規会議室が正常に登録され、予約対象となる

**トリガー**: スタッフが会議室管理画面で登録処理を開始

**主成功シナリオ**:
1. システムが会議室登録画面を表示する
2. スタッフが会議室基本情報を入力する（名称、定員、場所等）
3. スタッフが設備情報を選択する
4. スタッフが料金情報を設定する
5. スタッフが登録ボタンを押下する
6. システムが入力内容を検証する
7. システムが会議室IDを自動発行する
8. システムが会議室情報・設備情報・料金情報エンティティを作成する
9. システムが会議室状態を「利用可能」に設定する
10. システムが登録完了画面を表示する

**拡張**:
- 6a. 必須項目未入力: エラーメッセージを表示し、該当ステップに戻る
- 6b. 入力形式不正: エラーメッセージを表示し、該当ステップに戻る
- 8a. システムエラーで登録失敗: エラーメッセージを表示し、管理者に通知

**技術およびデータのバリエーションリスト**:
- 3a. 標準設備セット選択
- 3b. 個別設備選択
- 4a. 固定料金設定
- 4b. 時間帯別料金設定
- 7a. 連番ID発行
- 7b. 名称ベースID発行

**関連情報**:
- 会議室情報・設備情報・料金情報エンティティと連携
- 会議室状態管理

---

## UC009:🖥️会議室更新🌊

**使用時のコンテキスト**: スタッフが既存会議室の情報変更を行う場合

**スコープ**: 会議室予約システム

**レベル**: ユーザー目的

**主アクター**: スタッフ

**利害関係者と利益**:
- スタッフ: 会議室情報を正確に管理したい
- 会員: 最新の会議室情報で予約したい
- システム: 正確な会議室情報を維持したい

**事前条件**:
- スタッフとしてログインしている
- 更新対象の会議室が存在する

**最低保証**: 会議室情報の整合性が保たれる

**成功保証時**: 会議室情報が正常に更新される

**トリガー**: スタッフが会議室管理画面で更新処理を開始

**主成功シナリオ**:
1. システムが会議室一覧画面を表示する
2. スタッフが更新対象の会議室を選択する
3. システムが現在の会議室情報を表示する
4. スタッフが変更内容を入力する
5. スタッフが更新ボタンを押下する
6. システムが入力内容を検証する
7. システムが予約影響確認チェックを実行する
8. システムが会議室情報を更新する
9. システムが更新完了画面を表示する

**拡張**:
- 6a. 入力内容不正: エラーメッセージを表示し、ステップ4に戻る
- 7a. 既存予約に影響がある場合: 影響範囲を表示し、確認を求める
- 8a. システムエラーで更新失敗: エラーメッセージを表示し、管理者に通知

**技術およびデータのバリエーションリスト**:
- 4a. 基本情報変更
- 4b. 設備変更
- 4c. 料金変更
- 7a. 影響なし更新
- 7b. 予約影響確認要

**関連情報**:
- 会議室情報・設備情報・料金情報エンティティと連携
- 予約影響確認制御を使用

---

## UC010:🖥️メンテナンス管理🌊

**使用時のコンテキスト**: スタッフが会議室のメンテナンス情報を管理する場合

**スコープ**: 会議室予約システム

**レベル**: ユーザー目的

**主アクター**: スタッフ

**利害関係者と利益**:
- スタッフ: メンテナンス情報を効率的に管理したい
- 会員: メンテナンス中の会議室を避けて予約したい
- システム: 正確なメンテナンス情報を反映したい

**事前条件**:
- スタッフとしてログインしている
- メンテナンス対象の会議室が存在する

**最低保証**: メンテナンス情報が正確に管理される

**成功保証時**: メンテナンス期間中の会議室が予約対象から除外される

**トリガー**: スタッフがメンテナンス管理画面で処理を開始

**主成功シナリオ**:
1. システムがメンテナンス管理画面を表示する
2. スタッフがメンテナンス対象の会議室を選択する
3. スタッフがメンテナンス期間を設定する
4. スタッフがメンテナンス内容を入力する
5. スタッフが設定ボタンを押下する
6. システムが入力内容を検証する
7. システムが予約影響確認チェックを実行する
8. システムがメンテナンス情報エンティティを作成/更新する
9. システムが会議室状態を「メンテナンス中」に変更する
10. システムが設定完了画面を表示する

**拡張**:
- 6a. 期間設定不正: エラーメッセージを表示し、ステップ3に戻る
- 7a. 既存予約と重複: 影響する予約一覧を表示し、対応方法を選択
- 8a. システムエラーで設定失敗: エラーメッセージを表示し、管理者に通知

**技術およびデータのバリエーションリスト**:
- 3a. 開始・終了日時指定
- 3b. 定期メンテナンス設定
- 7a. 自動キャンセル
- 7b. 手動調整要求

**関連情報**:
- メンテナンス情報エンティティ・会議室情報エンティティと連携
- 予約影響確認制御を使用

---

## UC011:🖥️問い合わせ確認🌊

**使用時のコンテキスト**: スタッフが受付済みの問い合わせを確認する場合

**スコープ**: 会議室予約システム

**レベル**: ユーザー目的

**主アクター**: スタッフ

**利害関係者と利益**:
- スタッフ: 効率的な問い合わせ対応を行いたい
- 問い合わせ者: 迅速な対応を期待している
- システム: 問い合わせ状況を正確に管理したい

**事前条件**:
- スタッフとしてログインしている
- 確認対象の問い合わせが存在する

**最低保証**: 問い合わせ情報が正確に表示される

**成功保証時**: スタッフが問い合わせ内容を把握し、対応を開始できる

**トリガー**: スタッフが問い合わせ管理画面にアクセス

**主成功シナリオ**:
1. システムが問い合わせ一覧画面を表示する
2. システムが未対応問い合わせを優先表示する
3. スタッフが確認したい問い合わせを選択する
4. システムが問い合わせ詳細情報を表示する
5. システムが問い合わせ状態を「対応中」に更新する
6. システムが対応履歴に確認記録を追加する

**拡張**:
- 1a. 問い合わせが存在しない場合: 「問い合わせなし」メッセージを表示
- 4a. 詳細取得でエラー発生: エラーメッセージを表示し、ステップ1に戻る

**技術およびデータのバリエーションリスト**:
- 2a. 優先度順表示
- 2b. 受付日時順表示
- 4a. ポップアップ表示
- 4b. 専用画面表示

**関連情報**:
- 問い合わせ情報・対応履歴エンティティと連携
- 問い合わせ状態管理

---

## UC012:🖥️問い合わせ対応🌊

**使用時のコンテキスト**: スタッフが問い合わせに回答する場合

**スコープ**: 会議室予約システム

**レベル**: ユーザー目的

**主アクター**: スタッフ

**利害関係者と利益**:
- スタッフ: 適切な回答を効率的に提供したい
- 問い合わせ者: 満足できる回答を得たい
- システム: 対応履歴を正確に記録したい

**事前条件**:
- スタッフとしてログインしている
- 対応対象の問い合わせが「対応中」状態である

**最低保証**: 対応履歴が正確に記録される

**成功保証時**: 問い合わせが適切に回答され、完了状態になる

**トリガー**: スタッフが問い合わせ詳細画面で回答処理を開始

**主成功シナリオ**:
1. システムが回答入力画面を表示する
2. スタッフが回答内容を作成する
3. スタッフが回答送信ボタンを押下する
4. システムが回答内容を検証する
5. システムが対応履歴に回答記録を追加する
6. システムがメール配信システムに回答送信を依頼する
7. システムが問い合わせ状態を「解決済み」に更新する
8. システムが対応完了画面を表示する

**拡張**:
- 2a. 追加調査が必要な場合: 状態を「調査中」に変更し、調査依頼を記録
- 4a. 回答内容が不適切: エラーメッセージを表示し、ステップ2に戻る
- 6a. メール送信失敗: 対応は完了したまま、手動連絡フラグを設定
- 2b. 回答不可能な場合: 状態を「クローズ」に変更し、理由を記録

**技術およびデータのバリエーションリスト**:
- 2a. 定型回答選択
- 2b. 自由回答作成
- 6a. 自動メール送信
- 6b. 手動メール送信
- 7a. 完全解決
- 7b. 部分解決

**関連情報**:
- 問い合わせ情報・対応履歴エンティティと連携
- メール配信システムとのインターフェース連携