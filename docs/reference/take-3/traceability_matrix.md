# トレーサビリティマトリックス

## 要求分析 ↔ 要件定義 ↔ 実装タスクの対応表

### 1. 利用者の認証（ビジネスユースケース）

| 要求分析（BUC） | 要件定義（FR） | 実装タスク（T） |
|---|---|---|
| **利用者の認証** | **FR1. ユーザー認証機能** | **Phase 2: 認証基盤実装** |
| - 会員がシステムにログインする | FR1.1 ログイン認証 | T3.1.3 認証サービス実装 |
| - セッション管理による継続認証 | FR1.2 認証エラーハンドリング | T3.1.4 認証 API 実装 |
| - ログアウト機能 | FR1.3 セッション管理 | T3.2.1 AuthContext 実装 |
| | | T3.2.2 ログイン画面実装 |
| | | T3.2.3 認証プライベートルート実装 |

### 2. 利用者の管理（ビジネスユースケース）

| 要求分析（BUC） | 要件定義（FR） | 実装タスク（T） |
|---|---|---|
| **利用者の管理** | **FR2. 利用者管理機能** | **Phase 2: ユーザー管理実装** |
| - 窓口スタッフが利用者を登録する | FR2.1 利用者登録 | T3.1.1 User ドメインモデル実装 |
| - 利用者情報の更新 | FR2.2 利用者情報更新 | T3.1.2 User リポジトリ実装 |
| - 利用者の削除・退会処理 | FR2.3 利用者削除 | T4.1.1 ユーザー管理 API 実装 |
| | | T4.1.2 ユーザー管理サービス実装 |
| | | T4.2.1 ユーザー管理画面実装 |
| | | T4.2.2 ユーザー登録・編集フォーム実装 |

### 3. 会議室の検索（ビジネスユースケース）

| 要求分析（BUC） | 要件定義（FR） | 実装タスク（T） |
|---|---|---|
| **会議室の検索** | **FR3. 会議室検索機能** | **Phase 2: 会議室管理実装** |
| - 会員が利用可能な会議室を検索する | FR3.1 空室検索 | T5.1.1 Room ドメインモデル実装 |
| - 日時、定員、設備による絞り込み | FR3.2 詳細フィルタ | T5.1.2 Room リポジトリ実装 |
| | | T5.1.4 会議室検索サービス実装 |
| | | T5.2.1 会議室一覧画面実装 |
| | | T5.2.2 会議室カードコンポーネント実装 |

### 4. 会議室の予約（ビジネスユースケース）

| 要求分析（BUC） | 要件定義（FR） | 実装タスク（T） |
|---|---|---|
| **会議室の予約** | **FR4. 会議室予約機能** | **Phase 2: 予約機能実装** |
| - 会員が会議室を予約する | FR4.1 新規予約 | T6.1.1 Reservation ドメインモデル実装 |
| - 予約競合の防止・チェック | FR4.2 予約競合チェック | T6.1.2 予約競合チェックサービス実装 |
| - 既存予約の変更 | FR4.3 予約変更 | T6.1.3 予約ポリシーサービス実装 |
| - 予約のキャンセル | FR4.4 予約キャンセル | T6.1.4 予約 API 実装 |
| | | T6.1.5 ドメインイベント実装 |
| | | T6.2.1 予約フォーム実装 |
| | | T6.2.2 カレンダービュー実装 |
| | | T6.2.4 予約一覧画面実装 |

### 5. 会議室の登録（ビジネスユースケース）

| 要求分析（BUC） | 要件定義（FR） | 実装タスク（T） |
|---|---|---|
| **会議室の登録** | **FR5. 会議室管理機能** | **Phase 2: 会議室管理実装** |
| - 窓口スタッフが会議室情報を登録する | FR5.1 会議室登録 | T5.1.3 会議室管理 API 実装 |
| - 会議室情報の更新・編集 | FR5.2 会議室情報更新 | T5.2.3 会議室詳細画面実装 |
| - メンテナンス状態の設定 | FR5.3 会議室メンテナンス | T5.2.4 会議室管理画面実装（STAFF 用） |

### 6. 問い合わせ管理（ビジネスユースケース）

| 要求分析（BUC） | 要件定義（FR） | 実装タスク（T） |
|---|---|---|
| **問い合わせ管理** | **FR6. 問い合わせ管理機能** | **Phase 3: 問い合わせ機能実装** |
| - ゲストが問い合わせを投稿する | FR6.1 問い合わせ投稿 | T7.1.1 Inquiry ドメインモデル実装 |
| - 会員が問い合わせを投稿する | FR6.2 問い合わせ対応 | T7.1.2 問い合わせ API 実装 |
| - スタッフが問い合わせに対応する | | T7.1.3 メール通知サービス実装 |
| | | T7.2.1 問い合わせフォーム実装 |
| | | T7.2.2 問い合わせ管理画面実装（STAFF 用） |

## 非機能要件のトレーサビリティ

### セキュリティ要件

| 要求分析 | 要件定義（NFR） | 実装タスク（T） |
|---|---|---|
| 登録した利用者だけが利用できる | NFR2.1 データ保護 | T9.1.1 セキュリティヘッダー設定 |
| 利用者認証によるアクセス制御 | NFR2.2 認証セキュリティ | T9.1.2 入力値検証・サニタイゼーション強化 |
| | | T9.1.3 セキュリティテスト実装 |
| | | T9.1.4 アクセスログ・監査ログ実装 |

### パフォーマンス要件

| 要求分析 | 要件定義（NFR） | 実装タスク（T） |
|---|---|---|
| Web サイト上での快適な操作 | NFR1.1 応答時間 | T9.2.1 データベースクエリ最適化 |
| 複数利用者による同時利用 | NFR1.2 同時利用者数 | T9.2.2 Redis キャッシュ実装 |
| | | T9.2.3 フロントエンド最適化 |

### システム要件

| 要求分析 | 要件定義（NFR） | 実装タスク（T） |
|---|---|---|
| 安定したシステム稼働 | NFR3.1 システム稼働率 | T2.1.1 PostgreSQL Docker 環境構築 |
| 障害からの迅速な復旧 | NFR3.2 障害復旧 | T2.2.4 CI/CD パイプライン基盤構築 |
| | | T10.2.1 Docker 本番環境構築 |

### ユーザビリティ要件

| 要求分析 | 要件定義（NFR） | 実装タスク（T） |
|---|---|---|
| 一覧で確認できる UI | NFR4.1 操作性 | T6.2.2 カレンダービュー実装 |
| 直感的な操作インターフェース | NFR4.2 アクセシビリティ | T6.2.4 予約一覧画面実装 |
| | | T7.2.3 通知コンポーネント実装 |

## トレーサビリティの完全性チェック

### ビジネスユースケース網羅性
- ✅ 利用者の認証 → FR1 → T3.x（認証基盤）
- ✅ 利用者の管理 → FR2 → T3.1, T4.x（ユーザー管理）
- ✅ 会議室の検索 → FR3 → T5.1, T5.2.1-2（検索機能）
- ✅ 会議室の予約 → FR4 → T6.x（予約機能）
- ✅ 会議室の登録 → FR5 → T5.1.3, T5.2.3-4（管理機能）
- ✅ 問い合わせ管理 → FR6 → T7.x（問い合わせ機能）

### 機能要件網羅性
- ✅ FR1（認証） → T3.1.3-4, T3.2.1-3
- ✅ FR2（ユーザー管理） → T3.1.1-2, T4.1.1-2, T4.2.1-2
- ✅ FR3（会議室検索） → T5.1.1-2, T5.1.4, T5.2.1-2
- ✅ FR4（予約機能） → T6.1.1-5, T6.2.1-5
- ✅ FR5（会議室管理） → T5.1.3, T5.2.3-4
- ✅ FR6（問い合わせ） → T7.1.1-3, T7.2.1-2

### 非機能要件網羅性
- ✅ NFR1（パフォーマンス） → T9.2.1-3
- ✅ NFR2（セキュリティ） → T9.1.1-4
- ✅ NFR3（可用性） → T2.1.1, T2.2.4, T10.2.1
- ✅ NFR4（ユーザビリティ） → T6.2.2, T6.2.4, T7.2.3

**結論**: 要求分析のビジネスユースケースから実装タスクまでの完全なトレーサビリティが確保されており、要件漏れはありません。